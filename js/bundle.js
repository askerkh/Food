(()=>{"use strict";function e(e){document.querySelector(e).classList.remove("show","fade")}function t(e){document.querySelector(e).classList.add("show","fade")}window.addEventListener("DOMContentLoaded",(()=>{(function(e,t,n,a){const c=document.querySelectorAll(e),o=document.querySelector(t),s=o.querySelectorAll(n);o.addEventListener("click",(e=>{if(e.target&&e.target.classList.contains(n.slice(1))){let t=0;s.forEach((e=>e.classList.remove(a))),e.target.classList.add(a),s.forEach(((n,a)=>{e.target==n&&(t=a)})),c.forEach((e=>{e.classList.add("hide"),e.classList.remove("show","fade")})),c[t].classList.remove("hide"),c[t].classList.add("show","fade")}}))})(".tabcontent",".tabheader__items",".tabheader__item","tabheader__item_active"),function(n,a){const c=document.querySelector(n),o=document.querySelectorAll(a),s=setTimeout(t,5e4);c.addEventListener("click",(t=>{t.target!==c&&""!=t.target.getAttribute("data-close")||e(n)})),o.forEach((e=>{e.addEventListener("click",(e=>{clearInterval(s),t(n)}))})),document.addEventListener("keydown",(t=>{"Escape"===t.code&&c.classList.contains("active")&&e(n)})),window.addEventListener("scroll",(function e(){document.documentElement.scrollTop+document.documentElement.clientHeight==document.documentElement.scrollHeight&&(t(n),window.removeEventListener("scroll",e),clearInterval(s))}))}(".modal","[data-modal]"),function(e,t){function n(e){const t=(Date.parse(e)-new Date)/1e3;return[Math.trunc(t/86400),Math.trunc(t%86400/3600),Math.trunc(t%86400%3600/60),Math.trunc(t%86400%3600%60),t]}!function(e,t){const a=document.querySelectorAll(e),c=n(t);function o(){const e=n(t);e.forEach(((e,t,n)=>{e<10&&(n[t]=`0${e}`)})),a.forEach(((t,n)=>t.innerHTML=e[n]))}o();const s=setInterval(o,1e3);c[c.length]<=0&&clearInterval(s)}(e,t)}(".timer__block span","2023-01-31"),function(){class e{constructor(e,t,n,a,c,o){this.src=e,this.alt=t,this.title=n,this.descr=a,this.price=c,this.parent=document.querySelector(o),this.transfer=68.55,this.changeToRub();for(var s=arguments.length,r=new Array(s>6?s-6:0),i=6;i<s;i++)r[i-6]=arguments[i];this.classes=r}changeToRub(){this.price=Math.ceil(this.price*this.transfer)}render(){const e=document.createElement("div");0===this.classes.length?(this.classes="menu__item",e.classList.add(this.classes)):this.classes.forEach((t=>e.classList.add(t))),e.innerHTML=`\n                <img src=${this.src} alt=${this.alt}>\n                <h3 class="menu__item-subtitle">${this.title}</h3>\n                <div class="menu__item-descr">${this.descr}</div>\n                <div class="menu__item-divider"></div>\n                <div class="menu__item-price">\n                    <div class="menu__item-cost">Цена:</div>\n                    <div class="menu__item-total"><span>${this.price}</span> руб/день</div>\n                </div>`,this.parent.append(e)}}(async e=>{const t=await fetch(e);if(!t.ok)throw new Error(`Couldn't fetch ${e}, status: ${t.status}`);return await t.json()})("http://localhost:3000/menu").then((t=>{t.forEach((t=>{let{img:n,altimg:a,title:c,descr:o,price:s}=t;new e(n,a,c,o,s,".menu .container").render()}))}))}(),function(){const e=document.querySelector(".calculating__result span");let t,n,a,c,o;function s(e,t){document.querySelectorAll(e).forEach((e=>{e.classList.remove(t),e.getAttribute("data-ratio")===localStorage.getItem("ratio")&&e.classList.add(t),e.getAttribute("id")===localStorage.getItem("sex")&&e.classList.add(t)}))}function r(){t&&n&&a&&c&&o?(e.textContent="female"===t?(447.6+9.2*a+3.1*n-4.3*c)*o:(88.36+13.4*a+4.8*n-5.7*c)*o,e.textContent=Math.round(+e.textContent)):e.textContent="____"}function i(e,n){const a=document.querySelectorAll(e);a.forEach((e=>{e.addEventListener("click",(e=>{e.target.getAttribute("data-ratio")?(o=+e.target.getAttribute("data-ratio"),localStorage.setItem("ratio",+e.target.getAttribute("data-ratio"))):(t=e.target.getAttribute("id"),localStorage.setItem("sex",e.target.getAttribute("id"))),a.forEach((e=>e.classList.remove(n))),e.target.classList.add(n),r()}))}))}function l(e){const t=document.querySelector(e);t.addEventListener("input",(()=>{if(t.value.match(/\D/g))t.style.boxShadow="0 4px 15px rgb(255 0 0 / 60%)";else{switch(t.style.boxShadow="0 4px 15px rgb(0 0 0 / 20%)",t.getAttribute("id")){case"height":n=+t.value;break;case"weight":a=+t.value;break;case"age":c=+t.value}r()}}))}localStorage.getItem("sex")?t=localStorage.getItem("sex"):(t="female",localStorage.setItem("sex","female")),localStorage.getItem("ratio")?o=localStorage.getItem("ratio"):(o=1.375,localStorage.setItem("ratio",1.375)),s("#gender div","calculating__choose-item_active"),s(".calculating__choose_big div","calculating__choose-item_active"),r(),i("#gender div","calculating__choose-item_active"),i(".calculating__choose_big div","calculating__choose-item_active"),l("#height"),l("#weight"),l("#age")}(),function(n,a){function c(n){const c=document.querySelector(".modal__dialog");c.classList.add("hide"),t(a);const o=document.createElement("div");o.classList.add("modal__dialog"),o.innerHTML=`\n        <div class="modal__content">\n            <div data-close class="modal__close">&times;</div>\n            <div class="modal__title">${n}</div>\n        </div>\n        `,document.querySelector(".modal").append(o),setTimeout((()=>{o.remove(),c.classList.remove("show"),c.classList.remove("hide"),e(a)}),5e3)}document.querySelectorAll(n).forEach((e=>function(e){e.addEventListener("submit",(t=>{t.preventDefault();const n=document.createElement("img");n.src="img/form/spinner.svg",n.style="display: block; margin: 0 auto;",e.insertAdjacentElement("afterend",n);const a=new FormData(e);(async(e,t)=>{const n=await fetch("http://localhost:3000/requests",{method:"POST",headers:{"Content-type":"application/json"},body:t});return await n.json()})(0,JSON.stringify(Object.fromEntries(a.entries()))).then((e=>{console.log(e),c("Всё прошло успешно, мы скоро с вами свяжемся!")})).catch((()=>{c("Что-то пошло не так...")})).finally((()=>{e.reset(),n.remove()}))}))}(e)))}("form",".modal"),function(e){let{container:t,slide:n,nextArrow:a,prevArrow:c,totalCounter:o,currentCounter:s,wrapper:r,field:i}=e;const l=document.querySelectorAll(n),d=document.querySelector(t),u=document.querySelector(c),m=document.querySelector(a),h=document.querySelector(s),g=document.querySelector(o),f=document.querySelector(r),v=document.querySelector(i),_=window.getComputedStyle(f).width;g.textContent=l.length>0&&l.length<10?`0${l.length}`:l.length;let p=1,y=0;f.style.overflow="hidden",v.style.width=100*l.length+"%",v.style.transition="0.5s",v.style.display="flex",l.forEach((e=>{e.style.width=_})),d.style.position="relative";const w=document.createElement("ol");w.classList.add("carousel-indicators"),d.append(w);const E=[];for(let e=0;e<l.length;++e){const e=document.createElement("li");e.classList.add("dot"),w.append(e),E.push(e)}const L=+_.replace(/\D/gi,"");function S(){p=y/L+1,h.textContent=p>0&&p<10?`0${p}`:p,E.forEach((e=>e.style.opacity=".5")),E[p-1].style.opacity="1",v.style.transform=`translateX(-${y}px)`}S(),u.addEventListener("click",(()=>{0==y?y=L*(l.length-1):y-=L,S()})),m.addEventListener("click",(()=>{y==L*(l.length-1)?y=0:y+=L,S()})),E.forEach((e=>{e.addEventListener("click",(()=>{y=(E.indexOf(e)+1)*L-L,S()}))}))}({container:".offer__slider",slide:".offer__slide",nextArrow:".offer__slider-next",prevArrow:".offer__slider-prev",totalCounter:"#total",currentCounter:"#current",wrapper:".offer__slider-wrapper",field:".offer__slider-inner"})}))})();
//# sourceMappingURL=bundle.js.map